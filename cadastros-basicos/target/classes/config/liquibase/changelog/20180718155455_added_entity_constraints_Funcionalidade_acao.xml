<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

	<!-- Added the constraints for entity Usuario. -->
	<changeSet id="20180718155455-2" author="jhipster">

		<dropColumn columnName="id_funcionalidade"
			tableName="funcionalidade_acao" />
		<dropColumn columnName="id_acao"
			tableName="funcionalidade_acao" />

		<addColumn tableName="funcionalidade_acao">
			<column name="id_funcionalidade" type="bigint">
				<constraints nullable="true" />
			</column>
		</addColumn>
		
		
		<addColumn tableName="funcionalidade_acao">
			<column name="id_acao" type="bigint">
				<constraints nullable="true" />
			</column>
		</addColumn>
		
		<addForeignKeyConstraint
			baseColumnNames="id_funcionalidade"
			baseTableName="funcionalidade_acao"
			constraintName="fk_funcionalidade_acao_funcionalidade_id"
			referencedColumnNames="id" referencedTableName="funcionalidade" />
	
		<addForeignKeyConstraint
			baseColumnNames="id_acao"
			baseTableName="funcionalidade_acao"
			constraintName="fk_funcionalidade_acao_acao_id"
			referencedColumnNames="id" referencedTableName="acao" />

		<loadData encoding="UTF-8"
                  file="config/liquibase/dadosfuncionalidadeacao.csv"
                  separator=";"
                  tableName="funcionalidade_acao"/>

	</changeSet>
</databaseChangeLog>
