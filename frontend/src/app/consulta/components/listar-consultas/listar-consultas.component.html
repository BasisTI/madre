<div class="ui-g ui-fluid">
    <form [formGroup]="listaConsultas">
        <div class="ui-g-12">
            <h1>Pesquisar Consultas</h1>
            <div class="ui-g-2 ui-sm-12">
                <span class="ui-float-label">
                    <input type="text" pInputText pTooltip="Digite o número da consulta." formControlName="consulta"
                        (blur)="pegarNumeroConsulta($event)"   />
                    <label>Consulta</label>
                </span>
            </div>
            <div class="ui-g-5 ui-sm-12">
                <span class="ui-float-label">
                    <p-autoComplete field="nome" [suggestions]="pacientes" pInputText formControlName="nome"
                        (completeMethod)="listarPacientes($event)" (onBlur)="pegarPaciente($event)" [dropdown]="true"
                        >
                    </p-autoComplete>
                    <label>Nome</label>
                </span>
            </div>
            <div class="ui-g-2 ui-sm-12">
                <span class="md-inputfield">
                    <input pInputText disabled="true" [(ngModel)]="paciente" formControlName="prontuario" />
                    <label>Prontuário</label>
                </span>
            </div>
            <div class="ui-g-2 ui-sm-12">
                <span class="ui-float-label">
                    <input type="text" pTooltip="Digite a grade." pInputText formControlName="grade"
                        (blur)="pegarGrade($event)"  />
                    <label>Grade</label>
                </span>
            </div>
            <div class="ui-g-12"></div>
            <div class="ui-g-3 ui-sm-12">
                <span class="md-inputfield">
                    <p-dropdown optionLabel="nome" [options]="crm" pInputText formControlName="profissional"
                        (onClick)="pegarProfissional($event)" [filter]="true" placeholder="Selecione"
                        ></p-dropdown>
                    <label>Profissional</label>
                </span>
            </div>
            <div class="ui-g-3 ui-sm-12">
                <span class="md-inputfield">
                    <p-autoComplete field="especialidade" [suggestions]="especialidades" pInputText
                        formControlName="especialidade" (completeMethod)="buscaEspecialidade()" 
                        (onBlur)="pegarEspecialidade($event)"  [dropdown]="true">
                    </p-autoComplete>
                    <label>Especialidade</label>
                </span>
            </div>
            <div class="ui-g-2 ui-sm-12">
                <span class="ui-float-label">
                    <input type="text" pInputText pTooltip="Digite Código Central." formControlName="codigoCentral"
                        (blur)="pegarClinica($event)" />
                    <label>Clínica Central</label>
                </span>
            </div>
            <div class="ui-g-2 ui-sm-12">
                <span class="ui-float-label">
                     <p-calendar
                        [locale]="localizacao"
                        [yearRange]="anosDisponiveis"
                        [dateFormat]="formatoDeData"
                        monthNavigator="true"
                        yearNavigator="true"
                        formControlName="dataInicial"
                        (onClickOutside)="pegaData()"
                        showTime="true"
                        [(ngModel)]="data"
                    ></p-calendar>
                    <label>Data Consulta</label>
                </span>
            </div>        
            <div class="ui-g-12 ui-sm-12">
                <div class="ui-g-2">
                    <button pButton type="button" label="Pesquisar" pTooltip="Pesquisar consultas de paciente."
                        (click)="datatable.refresh(changeUrl())">
                    </button>
                </div>
                <div class="ui-g-2">
                    <button pButton type="button" label="Limpar" pTooltip="Limpar pesquisa de consultas."
                        (click)="limparPesquisa()">
                    </button>
                </div>
            </div>
        </div>
        <div class="ui-g-12 ui-sm-12">
            <basis-datatable [disableEdit]="true" [disableDelete]="true" [disableView]="true" #datatable
                (click)="selectConsulta()" [url]="searchUrl" sortField="brand">
                <p-column field="numeroConsulta" header="Consultas" [sortable]="true"></p-column>
                <p-column field="dataHoraDaConsulta" header="Data/Hora"></p-column>
                <p-column field="condicaoDeAtendimentoId" header="Cond. Atend."></p-column>
                <p-column field="clinicaCentralId" header="Central"></p-column>
                <p-column field="grade" header="Grade"></p-column>
                <p-column field="especialidade" header="Especialidade"></p-column>
                <p-column field="unidadeFuncional" header="Tipo. Func."></p-column>
                <p-column field="equipe" header="Equipe"></p-column>
                <p-column field="profissional" header="Profissional"></p-column>
                <p-column field="situacaoAtendimento" header="Sit. Atend."></p-column>
            </basis-datatable>
            <div class="ui-g-12 ui-sm-12">
                <div class="ui-g-2">
                    <button pButton type="button" label="Exportar" pTooltip="Exportar arquivo de consultas."></button>
                </div>
                <div class="ui-g-2">
                    <button pButton type="button" label="Histórico" pTooltip="Histórico de consultas."></button>
                </div>
            </div>
        </div>
    </form>
</div>